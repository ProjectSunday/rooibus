<!DOCTYPE html>
<html>
<head>
	<title>rooibus gps testing</title>
</head>
<style>
	#log {
		height: 200px;
		width: 100%;
		background: #eee;
	}
</style>
<body>
<textarea id="log"></textarea>
<script type="text/javascript">

	var log = document.getElementById('log')


	var myWorker = new Worker('myworker.js')

	// var stuff = { foo: 'stuff' }

	var data = {
		update: update
	}

	myWorker.postMessage(data)




	//222222/333
	//444555


	function update() {

		navigator.geolocation.getCurrentPosition(function (loc) { 

			console.log('yoooo')

			var now = new Date()

			var msg = now.toString()

			msg += ' accuracy: ' + loc.coords.accuracy
			msg += ' longitude: ' + loc.coords.longitude
			msg += ' latitude: ' + loc.coords.latitude


			log.value = msg + '\n' + log.value

			console.log('loc')

		})


	}





	// navigator.geolocation.watchPosition(function(loc) {1111

	// 	var now = new Date()

	// 	var msg = 'bbb' + now.toString()

	// 	msg += ' accuracy: ' + loc.coords.accuracy
	// 	msg += ' longitude: ' + loc.coords.longitude
	// 	msg += ' latitude: ' + loc.coords.latitude



	// 	var p = document.createElement('p')
	// 	p.innerHTML = msg
	// 	main.insertBefore(p, main.firstChild)

	// }, undefined, { enableHighAccuracy: true })



</script>
</body>
</html>