<!DOCTYPE html>
<html>
<head>
	<title>rooibus gps testing</title>
</head>
<body>
<div id="main"></div>
<script type="text/javascript">

	var main = document.getElementById('main')


	var myWorker = new Worker('myworker.js')

	var stuff = { foo: 'stuff' }

	myWorker.postMessage(stuff)


	//222222/333
	//444555




	myWorker.addEventListener('message', function (e) {

		console.log('event', navigator)

		navigator.geolocation.getCurrentPosition(function (loc) { 

			console.log('yoooo')

			var now = new Date()

			var msg = now.toString()

			msg += ' accuracy: ' + loc.coords.accuracy
			msg += ' longitude: ' + loc.coords.longitude
			msg += ' latitude: ' + loc.coords.latitude

			myWorker.postMessage(msg)

			console.log('loc')

		})

	})


	// navigator.geolocation.watchPosition(function(loc) {1111

	// 	var now = new Date()

	// 	var msg = 'bbb' + now.toString()

	// 	msg += ' accuracy: ' + loc.coords.accuracy
	// 	msg += ' longitude: ' + loc.coords.longitude
	// 	msg += ' latitude: ' + loc.coords.latitude



	// 	var p = document.createElement('p')
	// 	p.innerHTML = msg
	// 	main.insertBefore(p, main.firstChild)

	// }, undefined, { enableHighAccuracy: true })



</script>
</body>
</html>